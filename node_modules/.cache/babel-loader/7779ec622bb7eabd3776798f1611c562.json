{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\internship\\\\new\\\\gallery\\\\src\\\\ImgPage.js\";\nimport React from 'react';\nimport './css/CollectionsPage.css';\nimport IndexedDbRepository from './IndexedRepository';\nimport Menu from './Menu';\n\nclass ImgPage extends React.Component {\n  constructor(props) {\n    super(props); //this.handleChange = this.handleChange.bind(this);\n    //this.handleImageChange = this.handleImageChange.bind(this);\n\n    this.state = {\n      name: '',\n      format: '',\n      description: '',\n      size: '',\n      weight: '',\n      mimetype: '',\n      image: '',\n      collection: '',\n      date: '',\n      id: null\n    };\n\n    this.handleAdd = async () => {\n      var date = new Date();\n      var day = date.getDate();\n      var month = date.getMonth() + 1;\n      var year = date.getFullYear();\n      await this.repository.save('photos', {\n        image: this.state.image,\n        name: this.state.name,\n        description: this.state.description,\n        format: this.state.format,\n        date: day + '.' + month + '.' + year,\n        mimetype: this.state.mimetype,\n        weight: this.state.weight,\n        size: this.state.size,\n        collection: this.state.collection\n      }); //this.setState( { tasks: null } );\n      // this.setState( { tasks: await this.repository.findAll('photos') } );\n\n      console.log(this.state.tasks);\n    };\n  }\n\n  componentDidMount() {\n    this.repository = new IndexedDbRepository();\n    this.repository.findById('photos', parseInt(this.props.match.params.id)).then(r => this.setState({\n      image: r.image,\n      name: r.name,\n      description: r.description,\n      format: r.format,\n      mimetype: r.mimetype,\n      weight: r.weight,\n      size: r.size,\n      collection: r.collection,\n      date: r.date,\n      id: r.id\n    }));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Menu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }\n    }), \";\", /*#__PURE__*/React.createElement(\"img\", {\n      width: \"200px\",\n      height: \"100px\",\n      src: 'data:image/' + this.state.mimetype.split('.').pop() + ';base64,' + btoa(this.state.image),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }\n    }, this.state.name), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }\n    }, \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435: \", this.state.description), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }, \"\\u0424\\u043E\\u0440\\u043C\\u0430\\u0442: \", this.state.format), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }\n    }, \"\\u0420\\u0430\\u0437\\u043C\\u0435\\u0440 \\u043E\\u0440\\u0438\\u0433\\u0438\\u043D\\u0430\\u043B\\u044C\\u043D\\u043E\\u0433\\u043E \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F: \", this.state.size), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }\n    }, \"\\u0412\\u0435\\u0441 \\u0444\\u0430\\u0439\\u043B\\u0430: \", this.state.weight), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }\n    }, \"\\u0422\\u0438\\u043F \\u0444\\u0430\\u0439\\u043B\\u0430: \", this.state.mimetype), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }\n    }, \"\\u041A\\u043E\\u043B\\u043B\\u0435\\u043A\\u0446\\u0438\\u044F: \", this.state.collection), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }, \"\\u0414\\u0430\\u0442\\u0430 \\u0434\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F: \", this.state.date));\n  }\n\n}\n\nexport default ImgPage;","map":{"version":3,"sources":["C:/Users/User/Desktop/internship/new/gallery/src/ImgPage.js"],"names":["React","IndexedDbRepository","Menu","ImgPage","Component","constructor","props","state","name","format","description","size","weight","mimetype","image","collection","date","id","handleAdd","Date","day","getDate","month","getMonth","year","getFullYear","repository","save","console","log","tasks","componentDidMount","findById","parseInt","match","params","then","r","setState","render","split","pop","btoa"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './css/CollectionsPage.css';\r\nimport IndexedDbRepository from './IndexedRepository';\r\nimport Menu from './Menu';\r\n\r\nclass ImgPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        //this.handleChange = this.handleChange.bind(this);\r\n        //this.handleImageChange = this.handleImageChange.bind(this);\r\n        this.state = {\r\n            name: '',\r\n            format: '',\r\n            description: '', \r\n            size: '',\r\n            weight: '',\r\n            mimetype: '',\r\n            image: '',\r\n            collection: '',\r\n            date: '',\r\n            id: null\r\n        }\r\n\r\n        this.handleAdd = async() => {\r\n            var date = new Date();\r\n            var day = date.getDate();\r\n            var month = date.getMonth()+1;\r\n            var year = date.getFullYear();\r\n\r\n            await this.repository.save( 'photos', { image: this.state.image, \r\n                                            name: this.state.name, \r\n                                            description: this.state.description, \r\n                                            format: this.state.format,\r\n                                            date: day + '.' + month + '.' + year,\r\n                                            mimetype: this.state.mimetype,\r\n                                            weight: this.state.weight,\r\n                                            size: this.state.size,\r\n                                            collection: this.state.collection}\r\n                                             );\r\n            //this.setState( { tasks: null } );\r\n           // this.setState( { tasks: await this.repository.findAll('photos') } );\r\n            console.log(this.state.tasks);\r\n          };\r\n    }\r\n    componentDidMount() {\r\n       \r\n        this.repository = new IndexedDbRepository();\r\n        this.repository.findById('photos', parseInt(this.props.match.params.id)).then( r => this.setState( {             \r\n            image: r.image,\r\n            name: r.name,\r\n            description: r.description,\r\n            format: r.format,\r\n            mimetype: r.mimetype,\r\n            weight: r.weight,\r\n            size: r.size,\r\n            collection: r.collection,\r\n            date: r.date,\r\n            id: r.id } ) );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Menu />;\r\n                <img width = \"200px\" height = \"100px\" src = {'data:image/' + this.state.mimetype.split('.').pop() + ';base64,' + btoa(this.state.image)}/>\r\n                <h1>{this.state.name}</h1>\r\n                <p>Описание: {this.state.description}</p>\r\n                <p>Формат: {this.state.format}</p>\r\n                <p>Размер оригинального изображения: {this.state.size}</p>\r\n                <p>Вес файла: {this.state.weight}</p>\r\n                <p>Тип файла: {this.state.mimetype}</p>\r\n                <p>Коллекция: {this.state.collection}</p>\r\n                <p>Дата добавления: {this.state.date}</p>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default ImgPage;"]},"metadata":{},"sourceType":"module"}
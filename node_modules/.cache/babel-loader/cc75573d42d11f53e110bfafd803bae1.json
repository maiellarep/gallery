{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\internship\\\\gallery\\\\src\\\\AddImg.js\";\nimport React from 'react';\nimport './css/CollectionsPage.css';\nimport IndexedDbRepository from './IndexedDbRepository';\n\nclass AddImg extends React.Component {\n  constructor(props) {\n    super(props);\n    this.add = this.add.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.state = {\n      d: null,\n      name: 'rgergev',\n      format: 'ergerger',\n      description: '',\n      image: '',\n      tasks: null\n    };\n\n    this.counter = () => {\n      let i = new Date().getTime();\n      return i++;\n    };\n\n    this.handleAdd = async newTaskText => {\n      await this.repository.save({\n        id: this.counter(),\n        text: newTaskText\n      });\n      this.setState({\n        tasks: null\n      });\n      this.setState({\n        tasks: await this.repository.findAll()\n      });\n    };\n\n    this.handleDelete = async idToDelete => {\n      await this.repository.deleteById(idToDelete);\n      this.setState({\n        tasks: null\n      });\n      this.setState({\n        tasks: await this.repository.findAll()\n      });\n    };\n  }\n\n  componentDidMount() {\n    /*if ( !window.indexedDB ) window.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;\r\n    if ( !window.IDBTransaction ) window.IDBTransaction = window.webkitIDBTransaction || window.msIDBTransaction;\r\n    if ( !window.IDBKeyRange ) window.IDBKeyRange = window.webkitIDBKeyRange || window.msIDBKeyRange;\r\n    var d;\r\n    var openRequest = indexedDB.open(\"gallery\",1);\r\n    openRequest.onsuccess = function(e) {\r\n        console.log(\"Success!\");\r\n          d = e.target.result;\r\n        d.onerror = function(event){\r\n            alert(event.target.errorcode);\r\n        }\r\n    }\r\n       openRequest.onerror = function(e) {\r\n        console.log(\"Error\");\r\n        console.dir(e);\r\n    }\r\n      this.setState(\r\n        {db: d}\r\n    );\r\n    */\n\n    /*  var request = window.indexedDB.open(\"testDB\", 1);\r\n        var db;\r\n    request.onerror = function(event){\r\n    console.log(\"Error opening DB\", event);\r\n    }\r\n    request.onupgradeneeded   = function(event){\r\n    console.log(\"Upgrading\");\r\n    db = event.target.result;\r\n    var objectStore = db.createObjectStore(\"students\", { keyPath : \"rollNo\" });\r\n    };\r\n    request.onsuccess  = function(event){\r\n    console.log(\"Success opening DB\");\r\n    db = event.target.result;\r\n    }\r\n    var transaction = db.transaction([\"students\"],\"readwrite\");\r\n    transaction.oncomplete = function(event) {\r\n    console.log(\"Success\");\r\n    };\r\n    transaction.onerror = function(event) {\r\n    console.log(\"Error\");\r\n    };  \r\n    var objectStore = transaction.objectStore(\"students\");\r\n    objectStore.add(\"egega\");*/\n    this.repository = new IndexedDbRepository('id');\n    this.repository.findAll().then(tasks => this.setState({\n      tasks\n    }));\n  }\n\n  add() {\n    /* alert(\"dfbdv\");\r\n     alert(this.state.db);\r\n     var transaction = this.state.db.transaction([\"notes\"],\"readwrite\");\r\n     var store = transaction.objectStore(\"notes\");\r\n       var request = store.add({name: this.state.name, format: this.state.format},1);*/\n\n    /*.............................................\r\n    var db;\r\n    let dbReq = indexedDB.open('myDB', 1);\r\n    dbReq.onupgradeneeded = (event) => {\r\n    // Зададим переменной db ссылку на базу данных\r\n    db = event.target.result;\r\n    // Создадим хранилище объектов с именем notes.\r\n    let notes = db.createObjectStore('notes', {autoIncrement: true});\r\n    }\r\n    dbReq.onsuccess = (event) => {\r\n    db = event.target.result;\r\n    alert(db);\r\n    let tx = db.transaction(['notes'], 'readwrite');\r\n    alert(tx);\r\n    let store = tx.objectStore('notes');\r\n    alert(store);\r\n    let note = {name: this.state.name, descriptin: this.state.description};\r\n    alert(note);\r\n    let operation = store.add(note);\r\n    alert(operation);\r\n    }\r\n    dbReq.onerror = (event) => {\r\n    alert('error opening database ' + event.target.errorCode);\r\n    }*/\n  }\n\n  handleChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }\n    }, \"BDFBFSBS\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.add,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }\n    }, \"fbfdbds\"), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }\n    }, \"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"name\",\n      class: \"input_1\",\n      name: \"name\",\n      type: \"text\",\n      value: this.state.title,\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 132\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }\n    }, \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 34\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"description\",\n      class: \"input_1\",\n      name: \"description\",\n      type: \"text\",\n      value: this.state.description,\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 152\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }\n    }, \"\\u0422\\u0435\\u043A\\u0441\\u0442\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 31\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn green\",\n      onClick: this.add,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }\n    }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"));\n  }\n\n}\n\nexport default AddImg;","map":{"version":3,"sources":["C:/Users/User/Desktop/internship/gallery/src/AddImg.js"],"names":["React","IndexedDbRepository","AddImg","Component","constructor","props","add","bind","handleChange","state","d","name","format","description","image","tasks","counter","i","Date","getTime","handleAdd","newTaskText","repository","save","id","text","setState","findAll","handleDelete","idToDelete","deleteById","componentDidMount","then","e","target","value","render","title"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './css/CollectionsPage.css';\r\nimport IndexedDbRepository from './IndexedDbRepository';\r\n\r\nclass AddImg extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.add = this.add.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.state = {\r\n            d: null,\r\n            name: 'rgergev',\r\n            format: 'ergerger',\r\n            description: '', \r\n            image: '',\r\n            tasks:null\r\n        }\r\n\r\n        this.counter = () => {\r\n            let i = new Date().getTime();\r\n\r\n\r\n  return i++;\r\n\r\n        }\r\n\r\n        this.handleAdd = async( newTaskText) => {\r\n            await this.repository.save( { id: this.counter(), text: newTaskText } );\r\n            this.setState( { tasks: null } );\r\n            this.setState( { tasks: await this.repository.findAll() } );\r\n          };\r\n          this.handleDelete = async( idToDelete ) => {\r\n            await this.repository.deleteById( idToDelete );\r\n            this.setState( { tasks: null } );\r\n            this.setState( { tasks: await this.repository.findAll() } );\r\n          };\r\n    }\r\n    componentDidMount() {\r\n        /*if ( !window.indexedDB ) window.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;\r\n        if ( !window.IDBTransaction ) window.IDBTransaction = window.webkitIDBTransaction || window.msIDBTransaction;\r\n        if ( !window.IDBKeyRange ) window.IDBKeyRange = window.webkitIDBKeyRange || window.msIDBKeyRange;\r\n        var d;\r\n        var openRequest = indexedDB.open(\"gallery\",1);\r\n        openRequest.onsuccess = function(e) {\r\n            console.log(\"Success!\");\r\n\r\n            d = e.target.result;\r\n            d.onerror = function(event){\r\n                alert(event.target.errorcode);\r\n            }\r\n        }\r\n \r\n        openRequest.onerror = function(e) {\r\n            console.log(\"Error\");\r\n            console.dir(e);\r\n        }\r\n\r\n        this.setState(\r\n            {db: d}\r\n        );\r\n        */\r\n \r\n\r\n      /*  var request = window.indexedDB.open(\"testDB\", 1);\r\n\r\n        var db;\r\nrequest.onerror = function(event){\r\n    console.log(\"Error opening DB\", event);\r\n}\r\nrequest.onupgradeneeded   = function(event){\r\n    console.log(\"Upgrading\");\r\n    db = event.target.result;\r\n    var objectStore = db.createObjectStore(\"students\", { keyPath : \"rollNo\" });\r\n};\r\nrequest.onsuccess  = function(event){\r\n    console.log(\"Success opening DB\");\r\n    db = event.target.result;\r\n}\r\nvar transaction = db.transaction([\"students\"],\"readwrite\");\r\ntransaction.oncomplete = function(event) {\r\n    console.log(\"Success\");\r\n};\r\n\r\ntransaction.onerror = function(event) {\r\n    console.log(\"Error\");\r\n};  \r\nvar objectStore = transaction.objectStore(\"students\");\r\n\r\nobjectStore.add(\"egega\");*/\r\nthis.repository = new IndexedDbRepository( 'id' );\r\nthis.repository.findAll().then( tasks => this.setState( { tasks } ) );\r\n    }\r\n\r\n    add() {\r\n       /* alert(\"dfbdv\");\r\n        alert(this.state.db);\r\n        var transaction = this.state.db.transaction([\"notes\"],\"readwrite\");\r\n        var store = transaction.objectStore(\"notes\");\r\n\r\n        var request = store.add({name: this.state.name, format: this.state.format},1);*/\r\n        /*.............................................\r\n        var db;\r\nlet dbReq = indexedDB.open('myDB', 1);\r\ndbReq.onupgradeneeded = (event) => {\r\n  // Зададим переменной db ссылку на базу данных\r\n  db = event.target.result;\r\n  // Создадим хранилище объектов с именем notes.\r\n  let notes = db.createObjectStore('notes', {autoIncrement: true});\r\n}\r\ndbReq.onsuccess = (event) => {\r\n  db = event.target.result;\r\n  alert(db);\r\n  let tx = db.transaction(['notes'], 'readwrite');\r\n  alert(tx);\r\n  let store = tx.objectStore('notes');\r\n  alert(store);\r\n  let note = {name: this.state.name, descriptin: this.state.description};\r\n  alert(note);\r\nlet operation = store.add(note);\r\nalert(operation);\r\n}\r\ndbReq.onerror = (event) => {\r\n  alert('error opening database ' + event.target.errorCode);\r\n}*/\r\n\r\n    }\r\n\r\n    handleChange(e) {\r\n        this.setState({[e.target.name]: e.target.value});\r\n      }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h1>BDFBFSBS</h1>\r\n                <button type=\"button\" onClick={this.add}>fbfdbds</button>\r\n                <label>Заголовок</label><br/>\r\n          <input id=\"name\" class=\"input_1\" name=\"name\" type=\"text\" value={this.state.title} onChange={this.handleChange} required/><br/>\r\n          <label>Описание</label><br/>\r\n          <input id=\"description\" class=\"input_1\" name=\"description\" type=\"text\" value={this.state.description} onChange={this.handleChange} required/><br/>\r\n          <label>Текст</label><br/>\r\n          <button type=\"button\" class=\"btn green\" onClick={this.add}>Добавить</button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default AddImg;"]},"metadata":{},"sourceType":"module"}
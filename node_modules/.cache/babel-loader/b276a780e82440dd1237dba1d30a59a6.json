{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\internship\\\\gallery\\\\src\\\\AddImg.js\";\nimport React from 'react';\nimport './css/CollectionsPage.css';\nimport IndexedDbRepository from './IndexedRepository';\n\nclass AddImg extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleImageChange = this.handleImageChange.bind(this);\n    this.state = {\n      name: '',\n      format: 'Альбом',\n      description: '',\n      size: '',\n      weight: '',\n      mimetype: '',\n      date: '',\n      image: '',\n      tasks: null\n    };\n\n    this.handleAdd = async () => {\n      var date = new Date();\n      var day = date.getDate();\n      var month = date.getMonth() + 1;\n      var year = date.getFullYear();\n      await this.repository.save({\n        image: this.state.image,\n        name: this.state.name,\n        description: this.state.description,\n        format: this.state.format,\n        date: day + '.' + month + '.' + year\n      });\n      this.setState({\n        tasks: null\n      });\n      this.setState({\n        tasks: await this.repository.findAll()\n      });\n      console.log(this.state.tasks);\n    };\n\n    this.handleDelete = async idToDelete => {\n      alert(idToDelete);\n      await this.repository.deleteById(idToDelete);\n      this.setState({\n        tasks: null\n      });\n      this.setState({\n        tasks: await this.repository.findAll()\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.repository = new IndexedDbRepository('name');\n    this.repository.findAll().then(tasks => this.setState({\n      tasks\n    }));\n  }\n\n  handleChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  handleImageChange(e) {\n    e.preventDefault();\n    /*let reader = new FileReader();\r\n    let file = e.target.files[0];\r\n      reader.onloadend = () => {\r\n    this.setState({\r\n        image: file,\r\n        imagePreviewUrl: reader.result\r\n    });\r\n    }\r\n      reader.readAsDataURL(file)*/\n\n    let file = e.target.files[0];\n    alert(file.type);\n    this.setState({\n      mimetype: file.type\n    });\n    var bits;\n    console.log(file);\n    var reader = new FileReader();\n    console.log(reader);\n    var preview = document.getElementById(\"preview\");\n    reader.readAsBinaryString(file);\n\n    reader.onload = function (e) {\n      //alert(e.target.result);\n      bits = e.target.result;\n      console.log(bits);\n      preview.src = 'data:image/jpeg;base64,' + btoa(bits);\n    };\n\n    this.setState({\n      image: bits\n    });\n    alert(this.state.mimetype);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435\"), /*#__PURE__*/React.createElement(\"img\", {\n      width: \"300px\",\n      id: \"preview\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 46\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      name: \"image\",\n      onChange: this.handleImageChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"name\",\n      class: \"input_1\",\n      name: \"name\",\n      type: \"text\",\n      value: this.state.name,\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 133\n      }\n    }), /*#__PURE__*/React.createElement(\"select\", {\n      name: \"format\",\n      value: \"\\u0410\\u043B\\u044C\\u0431\\u043E\\u043C\",\n      onChange: this.handleChange,\n      onLoad: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u0410\\u043B\\u044C\\u0431\\u043E\\u043C\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }\n    }, \"\\u0410\\u043B\\u044C\\u0431\\u043E\\u043C\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u041F\\u043E\\u0440\\u0442\\u0440\\u0435\\u0442\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }\n    }, \"\\u041F\\u043E\\u0440\\u0442\\u0440\\u0435\\u0442\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u041A\\u0432\\u0430\\u0434\\u0440\\u0430\\u0442\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, \"\\u041A\\u0432\\u0430\\u0434\\u0440\\u0430\\u0442\")), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"description\",\n      class: \"input_1\",\n      name: \"description\",\n      type: \"text\",\n      value: this.state.description,\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 154\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn green\",\n      onClick: this.handleAdd,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"));\n  }\n\n}\n\nexport default AddImg;","map":{"version":3,"sources":["C:/Users/User/Desktop/internship/gallery/src/AddImg.js"],"names":["React","IndexedDbRepository","AddImg","Component","constructor","props","handleChange","bind","handleImageChange","state","name","format","description","size","weight","mimetype","date","image","tasks","handleAdd","Date","day","getDate","month","getMonth","year","getFullYear","repository","save","setState","findAll","console","log","handleDelete","idToDelete","alert","deleteById","componentDidMount","then","e","target","value","preventDefault","file","files","type","bits","reader","FileReader","preview","document","getElementById","readAsBinaryString","onload","result","src","btoa","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './css/CollectionsPage.css';\r\nimport IndexedDbRepository from './IndexedRepository';\r\n\r\nclass AddImg extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleImageChange = this.handleImageChange.bind(this);\r\n        this.state = {\r\n            name: '',\r\n            format: 'Альбом',\r\n            description: '', \r\n            size: '',\r\n            weight: '',\r\n            mimetype: '',\r\n            date: '',\r\n            image: '',\r\n            tasks:null\r\n        }\r\n\r\n        this.handleAdd = async() => {\r\n            var date = new Date();\r\n            var day = date.getDate();\r\n            var month = date.getMonth()+1;\r\n            var year = date.getFullYear();\r\n\r\n            await this.repository.save( { image: this.state.image, \r\n                                            name: this.state.name, \r\n                                            description: this.state.description, \r\n                                            format: this.state.format,\r\n                                            date: day + '.' + month + '.' + year}\r\n                                             );\r\n            this.setState( { tasks: null } );\r\n            this.setState( { tasks: await this.repository.findAll() } );\r\n            console.log(this.state.tasks);\r\n          };\r\n          this.handleDelete = async( idToDelete ) => {\r\n              alert(idToDelete);\r\n            await this.repository.deleteById( idToDelete );\r\n            this.setState( { tasks: null } );\r\n            this.setState( { tasks: await this.repository.findAll() } );\r\n          };\r\n    }\r\n    componentDidMount() {\r\n       \r\n        this.repository = new IndexedDbRepository( 'name' );\r\n        this.repository.findAll().then( tasks => this.setState( { tasks } ) );\r\n    }\r\n\r\n    handleChange(e) {\r\n        this.setState({[e.target.name]: e.target.value});\r\n    }\r\n\r\n    handleImageChange(e) {\r\n        e.preventDefault();\r\n\r\n        /*let reader = new FileReader();\r\n        let file = e.target.files[0];\r\n\r\n        reader.onloadend = () => {\r\n        this.setState({\r\n            image: file,\r\n            imagePreviewUrl: reader.result\r\n        });\r\n        }\r\n\r\n        reader.readAsDataURL(file)*/\r\n        let file = e.target.files[0];\r\n        alert(file.type);\r\n        this.setState({\r\n            mimetype: file.type\r\n        })\r\n        var bits;\r\n        console.log(file);\r\n        var reader = new FileReader();\r\n        console.log(reader);\r\n        var preview = document.getElementById(\"preview\");\r\n        reader.readAsBinaryString(file);\r\n\r\n\t\t\t\treader.onload = function(e) {\r\n\t\t\t\t\t//alert(e.target.result);\r\n                    bits = e.target.result;\r\n                    console.log(bits);\r\n   \r\n                    preview.src = 'data:image/jpeg;base64,' + btoa(bits);\r\n\r\n                }\r\n                this.setState({\r\n                    image: bits\r\n                });\r\n                alert(this.state.mimetype);\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n            <h1>Добавление</h1>\r\n            <img width=\"300px\" id=\"preview\"/><br/>\r\n            <input type=\"file\" name=\"image\" onChange={this.handleImageChange}/>\r\n            <input id=\"name\" class=\"input_1\" name=\"name\" type=\"text\" value={this.state.name} onChange={this.handleChange} required/><br/>\r\n            <select name=\"format\" value=\"Альбом\" onChange={this.handleChange} onLoad={this.handleChange}>\r\n                <option value=\"Альбом\">Альбом</option>\r\n                <option value=\"Портрет\">Портрет</option>\r\n                <option value=\"Квадрат\">Квадрат</option>\r\n            </select>\r\n            <input id=\"description\" class=\"input_1\" name=\"description\" type=\"text\" value={this.state.description} onChange={this.handleChange} required/><br/>\r\n            <button type=\"button\" class=\"btn green\" onClick={this.handleAdd}>Добавить</button>\r\n                {/*<h1>BDFBFSBS</h1>\r\n                <button type=\"button\" onClick={this.add}>fbfdbds</button>\r\n                <label>Заголовок</label><br/>\r\n          <input id=\"name\" class=\"input_1\" name=\"name\" type=\"text\" value={this.state.name} onChange={this.handleChange} required/><br/>\r\n          <label>Описание</label><br/>\r\n          <input id=\"description\" class=\"input_1\" name=\"description\" type=\"text\" value={this.state.description} onChange={this.handleChange} required/><br/>\r\n          <label>Текст</label><br/>\r\n          <button type=\"button\" class=\"btn green\" onClick={this.handleAdd}>Добавить</button>\r\n                <button type=\"button\" class=\"btn green\" onClick={() => this.handleDelete(2268)}>Удалить</button>*/}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default AddImg;"]},"metadata":{},"sourceType":"module"}
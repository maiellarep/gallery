{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\internship\\\\new\\\\gallery\\\\src\\\\ImgPage.js\";\nimport React from 'react';\nimport './css/CollectionsPage.css';\nimport './css/common.css';\nimport './css/Buttons.css';\nimport './css/ImgPage.css';\nimport IndexedDbRepository from './IndexedRepository';\nimport Menu from './Menu';\nimport { Link } from 'react-router-dom';\n\nclass ImgPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      format: '',\n      description: '',\n      size: '',\n      weight: '',\n      mimetype: '',\n      image: '',\n      collection: '',\n      date: '',\n      tags: '',\n      id: null\n    };\n\n    this.handleDelete = async idToDelete => {\n      this.repository.deleteById('photos', idToDelete).then(() => {\n        alert('Изображение удалено успешно!');\n        window.location = '/';\n      });\n    };\n  }\n\n  componentDidMount() {\n    document.title = \"Информация о картинке\";\n    this.repository = new IndexedDbRepository();\n    this.repository.findById('photos', parseInt(this.props.match.params.id)).then(r => this.setState({\n      image: r.image,\n      name: r.name,\n      description: r.description,\n      format: r.format,\n      mimetype: r.mimetype,\n      weight: r.weight,\n      size: r.size,\n      collection: r.collection,\n      date: r.date,\n      tags: r.tags.toString(),\n      id: r.id\n    }));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Menu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 18\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }\n    }, this.state.name)), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"imgcontent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: 'data:image/' + this.state.mimetype.split('.').pop() + ';base64,' + btoa(this.state.image),\n      alt: \"preview\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 21\n      }\n    }, \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435: \", this.state.description), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }\n    }, \"\\u0424\\u043E\\u0440\\u043C\\u0430\\u0442: \", this.state.format), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }\n    }, \"\\u0420\\u0430\\u0437\\u043C\\u0435\\u0440 \\u043E\\u0440\\u0438\\u0433\\u0438\\u043D\\u0430\\u043B\\u044C\\u043D\\u043E\\u0433\\u043E \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F: \", this.state.size), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }\n    }, \"\\u0412\\u0435\\u0441 \\u0444\\u0430\\u0439\\u043B\\u0430: \", this.state.weight), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }\n    }, \"\\u0422\\u0438\\u043F \\u0444\\u0430\\u0439\\u043B\\u0430: \", this.state.mimetype), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }\n    }, \"\\u041A\\u043E\\u043B\\u043B\\u0435\\u043A\\u0446\\u0438\\u044F: \", this.state.collection), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }\n    }, \"\\u0422\\u0435\\u0433\\u0438: \", this.state.tags), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }\n    }, \"\\u0414\\u0430\\u0442\\u0430 \\u0434\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F: \", this.state.date), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"btnsDiv\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      class: \"button\",\n      type: \"button\",\n      onClick: async () => {\n        await this.handleDelete(this.state.id);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 131\n      }\n    }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\")), /*#__PURE__*/React.createElement(Link, {\n      to: /edit/ + this.state.id,\n      class: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 25\n      }\n    }, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"), /*#__PURE__*/React.createElement(\"a\", {\n      class: \"button\",\n      href: 'data:image/' + this.state.mimetype.split('.').pop() + ';base64,' + btoa(this.state.image),\n      download: this.state.name + this.state.mimetype,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 25\n      }\n    }, \"\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C\"))));\n  }\n\n}\n\nexport default ImgPage;","map":{"version":3,"sources":["C:/Users/User/Desktop/internship/new/gallery/src/ImgPage.js"],"names":["React","IndexedDbRepository","Menu","Link","ImgPage","Component","constructor","props","state","name","format","description","size","weight","mimetype","image","collection","date","tags","id","handleDelete","idToDelete","repository","deleteById","then","alert","window","location","componentDidMount","document","title","findById","parseInt","match","params","r","setState","toString","render","split","pop","btoa"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './css/CollectionsPage.css';\r\nimport './css/common.css';\r\nimport './css/Buttons.css';\r\nimport './css/ImgPage.css';\r\nimport IndexedDbRepository from './IndexedRepository';\r\nimport Menu from './Menu';\r\nimport {Link} from 'react-router-dom';\r\n\r\nclass ImgPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            name: '',\r\n            format: '',\r\n            description: '', \r\n            size: '',\r\n            weight: '',\r\n            mimetype: '',\r\n            image: '',\r\n            collection: '',\r\n            date: '',\r\n            tags: '',\r\n            id: null\r\n        }\r\n\r\n        this.handleDelete = async( idToDelete ) => {\r\n            this.repository.deleteById( 'photos', idToDelete )\r\n            .then(() => {alert('Изображение удалено успешно!'); window.location = ('/')});\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        document.title = \"Информация о картинке\";\r\n        this.repository = new IndexedDbRepository();\r\n        this.repository.findById('photos', parseInt(this.props.match.params.id)).then( r => this.setState( {             \r\n            image: r.image,\r\n            name: r.name,\r\n            description: r.description,\r\n            format: r.format,\r\n            mimetype: r.mimetype,\r\n            weight: r.weight,\r\n            size: r.size,\r\n            collection: r.collection,\r\n            date: r.date,\r\n            tags: r.tags.toString(),\r\n            id: r.id } \r\n        ));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div class = \"container\">\r\n                {<Menu />}\r\n                <div class = \"header\">\r\n                    <h1>{this.state.name}</h1>\r\n                </div>\r\n                <div class = \"imgcontent\">\r\n                    <img src = {'data:image/' + this.state.mimetype.split('.').pop() + ';base64,' + btoa(this.state.image)} alt = \"preview\"/>\r\n                    \r\n                    <p>Описание: {this.state.description}</p>\r\n                    <p>Формат: {this.state.format}</p>\r\n                    <p>Размер оригинального изображения: {this.state.size}</p>\r\n                    <p>Вес файла: {this.state.weight}</p>\r\n                    <p>Тип файла: {this.state.mimetype}</p>\r\n                    <p>Коллекция: {this.state.collection}</p>\r\n                    <p>Теги: {this.state.tags}</p>\r\n                    <p>Дата добавления: {this.state.date}</p>\r\n                    <div class = \"btnsDiv\">\r\n                        <button class = \"button\" type = \"button\" onClick = {async () => {await this.handleDelete(this.state.id)}}><a>Удалить</a></button>\r\n                        <Link to={/edit/+ this.state.id} class=\"button\" >Редактировать</Link>\r\n                        <a class = \"button\" href = {'data:image/' + this.state.mimetype.split('.').pop() + ';base64,' + btoa(this.state.image)} download = {this.state.name+this.state.mimetype}>Скачать</a>\r\n                    </div>\r\n                    \r\n                </div>\r\n                \r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default ImgPage;"]},"metadata":{},"sourceType":"module"}
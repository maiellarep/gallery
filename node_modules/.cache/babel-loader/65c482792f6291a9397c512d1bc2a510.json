{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\internship\\\\gallery\\\\src\\\\AddImg.js\";\nimport React from 'react';\nimport './css/CollectionsPage.css';\nimport IndexedDBRepository from './IndexedRepository.js';\n\nclass AddImg extends React.Component {\n  constructor(props) {\n    super(props);\n    this.add = this.add.bind(this);\n    this.state = {\n      d: null,\n      name: 'rgergev',\n      format: 'ergerger',\n      description: '',\n      image: ''\n    };\n  }\n\n  componentDidMount() {\n    /*if ( !window.indexedDB ) window.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;\r\n    if ( !window.IDBTransaction ) window.IDBTransaction = window.webkitIDBTransaction || window.msIDBTransaction;\r\n    if ( !window.IDBKeyRange ) window.IDBKeyRange = window.webkitIDBKeyRange || window.msIDBKeyRange;\r\n    var d;\r\n    var openRequest = indexedDB.open(\"gallery\",1);\r\n    openRequest.onsuccess = function(e) {\r\n        console.log(\"Success!\");\r\n          d = e.target.result;\r\n        d.onerror = function(event){\r\n            alert(event.target.errorcode);\r\n        }\r\n    }\r\n       openRequest.onerror = function(e) {\r\n        console.log(\"Error\");\r\n        console.dir(e);\r\n    }\r\n      this.setState(\r\n        {db: d}\r\n    );\r\n    */\n\n    /*  var request = window.indexedDB.open(\"testDB\", 1);\r\n        var db;\r\n    request.onerror = function(event){\r\n    console.log(\"Error opening DB\", event);\r\n    }\r\n    request.onupgradeneeded   = function(event){\r\n    console.log(\"Upgrading\");\r\n    db = event.target.result;\r\n    var objectStore = db.createObjectStore(\"students\", { keyPath : \"rollNo\" });\r\n    };\r\n    request.onsuccess  = function(event){\r\n    console.log(\"Success opening DB\");\r\n    db = event.target.result;\r\n    }\r\n    var transaction = db.transaction([\"students\"],\"readwrite\");\r\n    transaction.oncomplete = function(event) {\r\n    console.log(\"Success\");\r\n    };\r\n    transaction.onerror = function(event) {\r\n    console.log(\"Error\");\r\n    };  \r\n    var objectStore = transaction.objectStore(\"students\");\r\n    objectStore.add(\"egega\");*/\n    var db;\n    let dbReq = indexedDB.open('myDB', 1);\n\n    dbReq.onupgradeneeded = event => {\n      // Зададим переменной db ссылку на базу данных\n      db = event.target.result; // Создадим хранилище объектов с именем notes.\n\n      let notes = db.createObjectStore('notes', {\n        autoIncrement: true\n      });\n    };\n\n    dbReq.onsuccess = event => {\n      db = event.target.result;\n      alert(db);\n      let tx = db.transaction(['notes'], 'readwrite');\n      let store = tx.objectStore('notes');\n      this.setState({\n        d: store\n      });\n    };\n\n    dbReq.onerror = event => {\n      alert('error opening database ' + event.target.errorCode);\n    }; // Добаляем заметку в хранилище объектов\n\n\n    let note = {\n      text: 'message',\n      timestamp: Date.now()\n    };\n    this.state.store.add(note);\n  }\n\n  add() {\n    alert(\"dfbdv\");\n    alert(this.state.db);\n    var transaction = this.state.db.transaction([\"notes\"], \"readwrite\");\n    var store = transaction.objectStore(\"notes\");\n    var request = store.add({\n      name: this.state.name,\n      format: this.state.format\n    }, 1);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, \"BDFBFSBS\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.add,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }, \"fbfdbds\"));\n  }\n\n}\n\nexport default AddImg;","map":{"version":3,"sources":["C:/Users/User/Desktop/internship/gallery/src/AddImg.js"],"names":["React","IndexedDBRepository","AddImg","Component","constructor","props","add","bind","state","d","name","format","description","image","componentDidMount","db","dbReq","indexedDB","open","onupgradeneeded","event","target","result","notes","createObjectStore","autoIncrement","onsuccess","alert","tx","transaction","store","objectStore","setState","onerror","errorCode","note","text","timestamp","Date","now","request","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './css/CollectionsPage.css';\r\nimport IndexedDBRepository from './IndexedRepository.js';\r\n\r\nclass AddImg extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.add = this.add.bind(this);\r\n        this.state = {\r\n            d: null,\r\n            name: 'rgergev',\r\n            format: 'ergerger',\r\n            description: '', \r\n            image: ''\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        /*if ( !window.indexedDB ) window.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;\r\n        if ( !window.IDBTransaction ) window.IDBTransaction = window.webkitIDBTransaction || window.msIDBTransaction;\r\n        if ( !window.IDBKeyRange ) window.IDBKeyRange = window.webkitIDBKeyRange || window.msIDBKeyRange;\r\n        var d;\r\n        var openRequest = indexedDB.open(\"gallery\",1);\r\n        openRequest.onsuccess = function(e) {\r\n            console.log(\"Success!\");\r\n\r\n            d = e.target.result;\r\n            d.onerror = function(event){\r\n                alert(event.target.errorcode);\r\n            }\r\n        }\r\n \r\n        openRequest.onerror = function(e) {\r\n            console.log(\"Error\");\r\n            console.dir(e);\r\n        }\r\n\r\n        this.setState(\r\n            {db: d}\r\n        );\r\n        */\r\n \r\n\r\n      /*  var request = window.indexedDB.open(\"testDB\", 1);\r\n\r\n        var db;\r\nrequest.onerror = function(event){\r\n    console.log(\"Error opening DB\", event);\r\n}\r\nrequest.onupgradeneeded   = function(event){\r\n    console.log(\"Upgrading\");\r\n    db = event.target.result;\r\n    var objectStore = db.createObjectStore(\"students\", { keyPath : \"rollNo\" });\r\n};\r\nrequest.onsuccess  = function(event){\r\n    console.log(\"Success opening DB\");\r\n    db = event.target.result;\r\n}\r\nvar transaction = db.transaction([\"students\"],\"readwrite\");\r\ntransaction.oncomplete = function(event) {\r\n    console.log(\"Success\");\r\n};\r\n\r\ntransaction.onerror = function(event) {\r\n    console.log(\"Error\");\r\n};  \r\nvar objectStore = transaction.objectStore(\"students\");\r\n\r\nobjectStore.add(\"egega\");*/\r\nvar db;\r\nlet dbReq = indexedDB.open('myDB', 1);\r\ndbReq.onupgradeneeded = (event) => {\r\n  // Зададим переменной db ссылку на базу данных\r\n  db = event.target.result;\r\n  // Создадим хранилище объектов с именем notes.\r\n  let notes = db.createObjectStore('notes', {autoIncrement: true});\r\n}\r\ndbReq.onsuccess = (event) => {\r\n  db = event.target.result;\r\n  alert(db);\r\n  let tx = db.transaction(['notes'], 'readwrite');\r\n  let store = tx.objectStore('notes');\r\n  this.setState({\r\n      d: store\r\n  })\r\n}\r\ndbReq.onerror = (event) => {\r\n  alert('error opening database ' + event.target.errorCode);\r\n}\r\n\r\n\r\n// Добаляем заметку в хранилище объектов\r\nlet note = {text: 'message', timestamp: Date.now()};\r\nthis.state.store.add(note);\r\n    }\r\n\r\n    add() {\r\n        alert(\"dfbdv\");\r\n        alert(this.state.db);\r\n        var transaction = this.state.db.transaction([\"notes\"],\"readwrite\");\r\n        var store = transaction.objectStore(\"notes\");\r\n\r\n        var request = store.add({name: this.state.name, format: this.state.format},1);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h1>BDFBFSBS</h1>\r\n                <button type=\"button\" onClick={this.add}>fbfdbds</button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default AddImg;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\internship\\\\new\\\\gallery\\\\src\\\\CollectionsPage.js\";\nimport React from 'react';\nimport './css/CollectionsPage.css';\nimport IndexedDbRepository from './IndexedRepository';\nimport { Link, withRouter } from 'react-router-dom';\n\nclass CollectionsPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      collections: []\n    };\n\n    this.handleDelete = async idToDelete => {\n      var colImg = await this.repository.searchByField('photos', 'collections', idToDelete);\n\n      if (window.confirm('Удалить также и изображения коллекции?')) {\n        for (const element of colImg) {\n          await this.repository.deleteById('photos', element.id);\n        }\n      } else {\n        for (const element of colImg) {\n          element.collection = 'Другое';\n          await this.repository.save('photos', element);\n        }\n      }\n\n      await this.repository.deleteById('collections', idToDelete);\n      this.setState({\n        collections: await this.repository.findAll('collections')\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.repository = new IndexedDbRepository(\"id\");\n    this.repository.findAll('collections').then(collections => this.setState({\n      collections\n    }));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"photo-wall\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 21\n      }\n    }, this.state.collections.map(collectiondata => {\n      if (collectiondata.colName == 'Другое') {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          class: \"post\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: require(collectiondata.colPreview.toString()),\n          width: \"200px\",\n          height: \"100px\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 33\n          }\n        }), /*#__PURE__*/React.createElement(Link, {\n          to: /collectionpage/ + collectiondata.colName,\n          class: \"btnlink\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 33\n          }\n        }, collectiondata.colName), /*#__PURE__*/React.createElement(\"h1\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 33\n          }\n        }, \"FBSFBS\"), /*#__PURE__*/React.createElement(\"button\", {\n          type: \"button\",\n          onClick: async () => {\n            await this.handleDelete(collectiondata.colName);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 33\n          }\n        }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\")));\n      } else {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          class: \"post\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          width: \"200px\",\n          height: \"100px\",\n          src: 'data:image/jpeg;base64,' + btoa(collectiondata.colPreview),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 33\n          }\n        }), /*#__PURE__*/React.createElement(Link, {\n          to: /collectionpage/ + collectiondata.colName,\n          class: \"btnlink\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 33\n          }\n        }, collectiondata.colName), /*#__PURE__*/React.createElement(\"button\", {\n          type: \"button\",\n          onClick: async () => {\n            await this.handleDelete(collectiondata.colName);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 33\n          }\n        }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\")));\n      }\n    }))), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/addcollection\",\n      class: \"btnlink\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 41\n      }\n    }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043A\\u043E\\u043B\\u043B\\u0435\\u043A\\u0446\\u0438\\u044E\")));\n  }\n\n}\n\nexport default CollectionsPage;","map":{"version":3,"sources":["C:/Users/User/Desktop/internship/new/gallery/src/CollectionsPage.js"],"names":["React","IndexedDbRepository","Link","withRouter","CollectionsPage","Component","constructor","props","state","collections","handleDelete","idToDelete","colImg","repository","searchByField","window","confirm","element","deleteById","id","collection","save","setState","findAll","componentDidMount","then","render","map","collectiondata","colName","require","colPreview","toString","btoa"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './css/CollectionsPage.css';\r\nimport IndexedDbRepository from './IndexedRepository';\r\nimport {Link, withRouter} from 'react-router-dom';\r\n\r\nclass CollectionsPage extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            collections: []\r\n        }\r\n\r\n        this.handleDelete = async( idToDelete ) => {\r\n            var colImg = await this.repository.searchByField('photos', 'collections', idToDelete);\r\n            if(window.confirm('Удалить также и изображения коллекции?'))\r\n            {\r\n                for (const element of colImg) {\r\n                    await this.repository.deleteById( 'photos', element.id );\r\n                }\r\n            }\r\n            else\r\n            {\r\n                for (const element of colImg) {\r\n                    element.collection = 'Другое';\r\n                    await this.repository.save( 'photos', element);\r\n                }\r\n            }\r\n            await this.repository.deleteById( 'collections', idToDelete );\r\n            this.setState( { collections: await this.repository.findAll('collections') } );\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.repository = new IndexedDbRepository(\"id\");\r\n        this.repository.findAll('collections').then( collections => this.setState( { collections } ) );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div class=\"container\">\r\n                <div id=\"photo-wall\">\r\n                    <ul>\r\n                    {this.state.collections.map((collectiondata) => {\r\n                        if(collectiondata.colName == 'Другое')\r\n                        {\r\n                            return (\r\n                                <li>\r\n                                <div class=\"post\">\r\n                                <img src = {require(collectiondata.colPreview.toString())} width = \"200px\" height = \"100px\" />\r\n                                <Link to={/collectionpage/+ collectiondata.colName} class=\"btnlink\" >{collectiondata.colName}</Link>\r\n                                <h1>FBSFBS</h1>\r\n                                <button type = \"button\" onClick = {async () => {await this.handleDelete(collectiondata.colName)}}>Удалить</button>\r\n                                </div>\r\n                                </li>\r\n                            );\r\n                        }\r\n                        else {\r\n                            return (\r\n                                <li>\r\n                                <div class=\"post\">\r\n                                <img width = \"200px\" height = \"100px\" src = {'data:image/jpeg;base64,' + btoa(collectiondata.colPreview)}/>\r\n                                <Link to={/collectionpage/+ collectiondata.colName} class=\"btnlink\" >{collectiondata.colName}</Link>\r\n                                <button type = \"button\" onClick = {async () => {await this.handleDelete(collectiondata.colName)}}>Удалить</button>\r\n                                </div>\r\n                                </li>\r\n                            );\r\n                        }\r\n                    \r\n                    })}   \r\n                    </ul>\r\n                </div>\r\n                <button type = \"button\"><Link to='/addcollection' class=\"btnlink\" >Добавить коллекцию</Link></button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default CollectionsPage;"]},"metadata":{},"sourceType":"module"}